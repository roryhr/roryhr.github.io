<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Rory's Corner - python, documentation</title>
        <link rel="stylesheet" href="https://www.roryhr.com/theme/css/main.css" />
        <link rel="icon" type="image/x-icon" href="https://www.roryhr.com/theme/favicon.ico">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://www.roryhr.com/">Rory's Corner</a></h1>
                <nav>
                        <ul>
                                <li><a href="/">Home</a></li>
                                <li><a href="/archives">Articles</a></li>
                                <li><a href="/pages/about">About</a></li>
                                <li><a href="/pages/projects">Projects</a></li>
                                <li><a href="/pages/contact">Contact</a></li>
                                <li><a href="/images/donuts/donuts">Donuts</a></li>
                        </ul>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://www.roryhr.com/how-does-this-thing-work.html">How does this thing work?</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-03-12T00:00:00-08:00">
                Published: Sun 12 March 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://www.roryhr.com/author/rory-hartong-redden.html">Rory Hartong-Redden</a>
        </address>
<p>In <a href="https://www.roryhr.com/category/python-documentation.html">python, documentation</a>.</p>

</footer><!-- /.post-info --><p>Updated: 2022-12-12</p>
<p>Added a <code>requirements.txt</code> to capture dependencies and ported to MacOS. </p>
<p>Updated: 2024-09-19
entry-point is the Makefile </p>
<h1>Introduction</h1>
<p>After 9 months I'm returning to this website.
My first question was "How does this thing work?"
Of course, I didn't document it and I don't remember. Lesson learned.</p>
<p><strong>The things we take for granted are the most important to document.</strong></p>
<p>This post is for myself and anyone interested in using Pelican to make a Github-hosted website.</p>
<h1>How does this thing work?</h1>
<h2>High level overview</h2>
<p>This site is hosted for free by <a href="https://github.com/">GitHub</a> from the special repository <a href="https://github.com/roryhr/roryhr.github.io">roryhr/roryhr.github.io</a>. 
Thanks, GitHub!</p>
<p>I used a static site generator called Pelican that generates html, which comprises this website, from Markdown text files in a particular directory structure (more on that in a bit).
These files are in a separate repository at
<a href="https://github.com/roryhr/code/tree/master/website_code">roryhr/code/website_cost</a>.</p>
<h2>Recipes</h2>
<p>Content for the website goes in the <code>content</code> directory. 
Generate the website</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>py39<span class="o">)</span><span class="w"> </span>~/p/website_code&gt;<span class="w"> </span>pelican<span class="w"> </span>content
Done:<span class="w"> </span>Processed<span class="w"> </span><span class="m">13</span><span class="w"> </span>articles,<span class="w"> </span><span class="m">0</span><span class="w"> </span>drafts,<span class="w"> </span><span class="m">4</span><span class="w"> </span>pages,<span class="w"> </span><span class="m">0</span><span class="w"> </span>hidden<span class="w"> </span>pages<span class="w"> </span>and<span class="w"> </span><span class="m">0</span><span class="w"> </span>draft<span class="w"> </span>pages<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">0</span>.85<span class="w"> </span>seconds.
</code></pre></div>

<p>The output html goes to the <code>output</code> directory which gets pushed to <code>roryhr.github.io</code> repo.</p>
<div class="highlight"><pre><span></span><code><span class="o">((</span>blog<span class="o">))</span><span class="w"> </span>rory@rory-Satellite-S75-B:~/Projects/site-code/output$<span class="w"> </span>git<span class="w"> </span>status
On<span class="w"> </span>branch<span class="w"> </span>master
Your<span class="w"> </span>branch<span class="w"> </span>is<span class="w"> </span>up-to-date<span class="w"> </span>with<span class="w"> </span><span class="s1">&#39;origin/master&#39;</span>.
Changes<span class="w"> </span>not<span class="w"> </span>staged<span class="w"> </span><span class="k">for</span><span class="w"> </span>commit:
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git add &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>discard<span class="w"> </span>changes<span class="w"> </span><span class="k">in</span><span class="w"> </span>working<span class="w"> </span>directory<span class="o">)</span>

<span class="w">    </span>modified:<span class="w">   </span>archives.html
<span class="w">    </span>modified:<span class="w">   </span>author/rory-hartong-redden.html
<span class="w">    </span>modified:<span class="w">   </span>authors.html
<span class="w">    </span>modified:<span class="w">   </span>category/opinion.html

Untracked<span class="w"> </span>files:
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git add &lt;file&gt;...&quot;</span><span class="w"> </span>to<span class="w"> </span>include<span class="w"> </span><span class="k">in</span><span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>

<span class="w">    </span>how-does-this-thing-work.html

no<span class="w"> </span>changes<span class="w"> </span>added<span class="w"> </span>to<span class="w"> </span>commit<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s2">&quot;git add&quot;</span><span class="w"> </span>and/or<span class="w"> </span><span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>
<span class="o">((</span>blog<span class="o">))</span><span class="w"> </span>rory@rory-Satellite-S75-B:~/Projects/site-code/output$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>-v
origin<span class="w">  </span>https://github.com/roryhr/roryhr.github.io<span class="w"> </span><span class="o">(</span>fetch<span class="o">)</span>
origin<span class="w">  </span>https://github.com/roryhr/roryhr.github.io<span class="w"> </span><span class="o">(</span>push<span class="o">)</span>
<span class="o">((</span>blog<span class="o">))</span><span class="w"> </span>rory@rory-Satellite-S75-B:~/Projects/site-code/output$
</code></pre></div>

<h3>Development</h3>
<p>In <code>pelicanconf.py</code> enable relative URLs by setting <code>RELATIVE_URLS=True</code> and comment out <code>ANALYTICS</code>. 
Neither are necessary.</p>
<p>Take advantage of Pelican script to recompile the site as you edit it (very cool!).</p>
<p>Across my various projects I like to have a consistent make entrypoint because remembering the particulars of Pelican, Flask, Django across different versions is hard.</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>py39<span class="o">)</span><span class="w"> </span>~/p/website_code&gt;<span class="w"> </span>make<span class="w"> </span>dev
</code></pre></div>

<p>In this case that command is </p>
<div class="highlight"><pre><span></span><code><span class="n">source</span><span class="w"> </span><span class="n">activate</span><span class="w"> </span><span class="n">py39</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pelican</span><span class="w"> </span><span class="o">--</span><span class="n">listen</span><span class="w"> </span><span class="o">--</span><span class="n">autoreload</span><span class="w"> </span><span class="o">--</span><span class="n">relative</span><span class="o">-</span><span class="n">urls</span>
</code></pre></div>

<p>Navigate to <code>http://localhost:8000</code></p>
<h1>Repository contents</h1>
<div class="highlight"><pre><span></span><code>site-code/
<span class="w">    </span>content/
<span class="w">        </span>blog/
<span class="w">            </span>blog-posts-go-here.md
<span class="w">        </span>images/
<span class="w">            </span>images-go-here.jpg
<span class="w">            </span>and-other-static-files.html
<span class="w">        </span>pages/
<span class="w">            </span>about.md
<span class="w">            </span>contact.md
<span class="w">            </span>index.md
<span class="w">            </span>projects.md
<span class="w">    </span>output/
<span class="w">        </span>index.html
<span class="w">        </span>lots<span class="w"> </span>of<span class="w"> </span>other<span class="w"> </span>html<span class="w"> </span>files
<span class="w">    </span>LICENSE
<span class="w">    </span>pelicanconf.py<span class="w">  </span>
<span class="w">    </span>README.md
</code></pre></div>

<h2>Wiring the site up</h2>
<p>I made a custom landing page with <code>pages/index.md</code> which becomes <code>index.html</code></p>
<div class="highlight"><pre><span></span><code><span class="n">title</span><span class="p">:</span>
<span class="n">save_as</span><span class="p">:</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span>

<span class="n">Thanks</span> <span class="k">for</span> <span class="n">stopping</span> <span class="n">by</span> <span class="n">my</span> <span class="n">little</span> <span class="n">website</span><span class="o">.</span>

<span class="o">--</span> <span class="n">Rory</span> <span class="n">Hartong</span><span class="o">-</span><span class="n">Redden</span>
</code></pre></div>

<p>In <code>site-code/pelicanconf.py</code> I wire up the buttons so they're labeled and go to the appropriate place (this took some fiddling).</p>
<div class="highlight"><pre><span></span><code><span class="n">MENUITEMS</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Home&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;/archives&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;About&#39;</span><span class="p">,</span> <span class="s1">&#39;/pages/about&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;Projects&#39;</span><span class="p">,</span> <span class="s1">&#39;/pages/projects&#39;</span><span class="p">),</span>
             <span class="p">(</span><span class="s1">&#39;Contact&#39;</span><span class="p">,</span> <span class="s1">&#39;/pages/contact&#39;</span><span class="p">)]</span>
</code></pre></div>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                                <li><a href="https://www.chipy.org/">ChiPy</a></li>
                                <li><a href="http://baypiggies.net/">BayPIGies</a></li>
                                <li><a href="http://pyninsula.org/">Pyninsula</a></li>
                                <li><a href="http://sfpythonmeetup.com/">SF Python</a></li>
                                <li><a href="http://blog.kaggle.com/">No Free Hunch (Kaggle)</a></li>
                                <li><a href="http://efavdb.com/">EFAVDB</a></li>
                                <li><a href="https://www.wheresyoured.at/">Where's Your Ed At</a></li>
                                <li><a href="http://sisl.stanford.edu/">SISL</a></li>
                                <li><a href="https://adventofcode.com/">Advent of Code</a></li>
                                <li><a href="https://simonwillison.net/">Simon Willison's Weblog</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                                <li><a href="https://github.com/roryhr">Github</a></li>
                                <li><a href="https://www.linkedin.com/in/rory-hartong-redden">LinkedIn</a></li>
                                <li><a href="https://mastodon.social/@roryhr">Mastodon</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                        Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes
                        great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow"
                                href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing
                                Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script defer src="https://cloud.umami.is/script.js" data-website-id="a1db9ef4-135a-4406-8304-f1ffa50665bc"></script>
</body>

</html>